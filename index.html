<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>404: ERROR HEART NOT FOUND</title>

<style>
  body {
    margin: 0;
    background: black;
    color: #00ff9c;
    font-family: monospace;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
  }

  #intro, #game {
    text-align: center;
  }

  #game {
    display: none;
  }

  #terminal {
    border: 1px solid #00ff9c;
    padding: 16px;
    margin-bottom: 12px;
    width: 420px;
    white-space: pre-line;
  }

  button {
    background: black;
    color: #00ff9c;
    border: 1px solid #00ff9c;
    padding: 10px 16px;
    cursor: pointer;
    font-family: monospace;
  }

  button:hover {
    background: #00ff9c;
    color: black;
  }

  canvas {
    border: 2px solid #00ff9c;
    image-rendering: pixelated;
    background: #000;
  }

  #dialogueBox {
    margin-top: 10px;
  }

  .clickable {
    text-decoration: underline;
    cursor: pointer;
  }
</style>
</head>

<body>

<!-- INTRO -->
<div id="intro">
  <div id="terminal">
YOU'VE BEEN HACKED BY BUNNY
SYSTEM INTEGRITY: COMPROMISED
PRESS BUTTON TO ATTEMPT RECOVERY
  </div>
  <button id="startBtn">SECURE NETWORK</button>
</div>

<!-- GAME -->
<div id="game">
  <canvas id="gameCanvas" width="500" height="500"></canvas>
  <div id="dialogueBox"></div>
</div>

<script>
/* ---------- SETUP ---------- */
const intro = document.getElementById("intro");
const game = document.getElementById("game");
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const dialogueBox = document.getElementById("dialogueBox");

const tileCount = 10;
const tileSize = canvas.width / tileCount;

let player = { x: 1, y: 1 };
let collected = 0;

/* ---------- LEVEL ---------- */
let maze = [
  [1,1,1,1,1,1,1,1,1,1],
  [1,0,2,0,0,0,0,2,0,1],
  [1,0,1,1,0,1,1,0,0,1],
  [1,0,0,0,2,0,0,0,0,1],
  [1,1,1,0,1,0,1,1,0,1],
  [1,0,0,0,0,0,0,2,0,1],
  [1,0,1,1,0,1,1,0,0,1],
  [1,0,0,0,2,0,0,0,0,1],
  [1,2,0,0,0,0,0,0,2,1],
  [1,1,1,1,1,1,1,1,1,1],
];

const totalCollectibles = maze.flat().filter(t => t === 2).length;

/* ---------- DRAW ---------- */
function draw() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  for (let y = 0; y < tileCount; y++) {
    for (let x = 0; x < tileCount; x++) {
      const px = x * tileSize;
      const py = y * tileSize;

      if (maze[y][x] === 1) {
        ctx.fillStyle = "#ff66aa";
        ctx.fillRect(px, py, tileSize, tileSize);
      }

      if (maze[y][x] === 2) {
        ctx.fillStyle = "#00ff9c";
        ctx.fillRect(
          px + tileSize * 0.35,
          py + tileSize * 0.35,
          tileSize * 0.3,
          tileSize * 0.3
        );
      }
    }
  }

  // Player (not a blob)
  ctx.fillStyle = "#00ff9c";
  ctx.fillRect(
    player.x * tileSize + tileSize * 0.2,
    player.y * tileSize + tileSize * 0.2,
    tileSize * 0.6,
    tileSize * 0.6
  );
}

/* ---------- MOVE ---------- */
document.addEventListener("keydown", (e) => {
  let nx = player.x;
  let ny = player.y;

  if (e.key === "ArrowUp") ny--;
  if (e.key === "ArrowDown") ny++;
  if (e.key === "ArrowLeft") nx--;
  if (e.key === "ArrowRight") nx++;

  if (maze[ny][nx] !== 1) {
    player.x = nx;
    player.y = ny;

    if (maze[ny][nx] === 2) {
      maze[ny][nx] = 0;
      collected++;
      if (collected === totalCollectibles) {
        dialogueBox.innerHTML = "SYSTEM STABILIZED ðŸ’š";
      }
    }

    draw();
  }
});

/* ---------- START ---------- */
document.getElementById("startBtn").addEventListener("click", () => {
  intro.style.display = "none";
  game.style.display = "block";
  draw();
});
</script>

</body>
</html>
